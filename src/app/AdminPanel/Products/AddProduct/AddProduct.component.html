<form [formGroup]="productForm" (ngSubmit)="createProduct()">
  <div class="product-detail-page section-gap" *ngFor="let detailData of data">
    <div class="container">
      <div fxLayout="row wrap" fxLayoutAlign="center center" class="col-gap">
        <div
          fxFlex.xs="100"
          fxFlex.sm="100"
          fxFlex.md="90"
          fxFlex.lg="80"
          fxFlex.xl="90"
        >
          <div fxLayout="row wrap" class="col-gap position-relative">
            <div
              fxFlex.xs="100"
              fxFlex.sm="100"
              fxFlex.md="50"
              fxFlex.lg="50"
              fxFlex.xl="50"
            >
              <div fxLayout="row wrap">
                <div
                  fxFlex.xs="15"
                  fxFlex.sm="15"
                  fxFlex.md="15"
                  fxFlex.lg="15"
                  fxFlex.xl="15"
                >
                  <div class="product-detail-image-gallery pr-4">
                    <mat-grid-list cols="1" rowHeight="1:1" gutterSize="20px">
                      <mat-grid-tile
                        *ngFor="
                          let img of detailData.image_gallery;
                          let i = index
                        "
                      >
                        <div class="product-image-gallery-item add-icon">
                          <a
                            id="{{ i }}_img"
                            class="p-link"
                            [ngClass]="{ 'border-active': i === 0 }"
                            href="javascript:void(0)"
                            (mouseenter)="getImagePath(img, i)"
                          >
                            <img [src]="img" alt="" width="100" height="100" />
                          </a>
                          <button
                            class="add-btn"
                            md-mini-fab
                            type="button"
                            (click)="selectedButton = i"
                          >
                            <label for="fileToUpload">
                              <mat-icon>add</mat-icon>
                            </label>
                          </button>

                          <!-- add-btn -->
                          <input
                            mat
                            id="fileToUpload"
                            type="file"
                            accept="image/x-png,image/jpeg"
                            multiple
                            (change)="uploadImages($event.target.files)"
                            style="display: none;"
                          />
                        </div>
                      </mat-grid-tile>
                    </mat-grid-list>
                  </div>
                  <!-- product-detail-image-gallery -->
                </div>
                <div
                  fxFlex.xs="85"
                  fxFlex.sm="85"
                  fxFlex.md="85"
                  fxFlex.lg="85"
                  fxFlex.xl="85"
                  class="relative"
                  *ngIf="mainImgPath"
                >
                  <embryo-ImgZoom
                    [imgSrc]="mainImgPath"
                    imgStyle="width:auto; height:auto;"
                    resultStyle="background-repeat: no-repeat; z-index: 2; position:absolute;
                              -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
                              box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); top: 0;left: 100%;"
                    lensStyle="width:100px; height:100px"
                    containerStyle=""
                  >
                  </embryo-ImgZoom>
                </div>
                <!-- relative -->
              </div>
            </div>
            <div
              fxFlex.xs="100"
              fxFlex.sm="100"
              fxFlex.md="50"
              fxFlex.lg="50"
              fxFlex.xl="50"
            >
              <div class="product-detail-content ml-3">
                <a
                  class="primary-color font-medium"
                  href="javascript:void(0)"
                  routerLink="/admin-panel/products"
                  >Back to Product</a
                >
                <h3
                  [ngClass]="{
                    'add-text': true || productForm.get('name').valid,
                    'bad-text':
                      !productForm.get('name').valid &&
                      productForm.get('name').touched 
                  }"
                >
                  <input
                    matInput
                    formControlName="name"
                    type="text"
                    placeholder="Add product Name"
                    autocomplete="off"
                  />
                  <mat-error
                    class="text-medium"
                    *ngIf="
                      productForm.get('name').hasError('minlength') &&
                      productForm.get('name').touched &&
                      !productForm.get('name').hasError('required')
                    "
                  >
                    Product Name must be at least 4 characters
                  </mat-error>
                  <mat-error
                    class="text-medium"
                    *ngIf="
                      productForm.get('name').hasError('required') &&
                      (productForm.get('name').touched || productForm.get('name').dirty) 
                    "
                  >
                  Name filed is <strong>required</strong>
                  </mat-error>
                </h3>
                <div class="product-detail-price">
                  <!-- <h4> -->
                  <h4
                  class="accent-color"
                  [ngClass]="{
                     'add-text': true || productForm.get('price').valid,
                     'bad-text':
                       !productForm.get('price').valid &&
                       (productForm.get('price').touched || productForm.get('price').dirty) 
                   }">
                    <input
                      matInput
                      formControlName="price"
                      type="number"
                      placeholder="Add Price"
                      minlength="4"
                      autocomplete="off"
                      required
                    />
                    <mat-error
                    class="text-medium"
                    *ngIf="
                      productForm.get('price').hasError('required') &&
                      (productForm.get('price').touched || productForm.get('price').dirty) 
                    "
                  >
                  Price filed is <strong>required</strong>
                  </mat-error>
                  </h4>
                </div>
                <ul class="no-style mb-4">
                  <li class="add-text">
                    <div class="font-medium mb-2">Availablity :</div>
                    <mat-radio-group formControlName="outOfStock">
                      <mat-radio-button value="false"
                        >In Stock</mat-radio-button
                      >
                      <mat-radio-button class="ml-2" value="true"
                        >Out of Stock</mat-radio-button
                      >
                    </mat-radio-group>
                  </li>
                  <!-- <li class="add-text" fxLayout="row wrap" fxLayoutAlign="start start">
                              <span class="font-medium">Product Code </span>: 
                              <input class="ml-2" matInput formControlName="product_code" type="text">
                           </li>
                           <li class="add-text" fxLayout="row wrap" fxLayoutAlign="start start">
                              <span class="font-medium">Tags</span>: 
                              <input class="ml-2" matInput formControlName="tags" type="text">
                           </li> -->
                </ul>
                <div class="short-des">
                  <div class="font-medium" 
                  [ngClass]="{
                     'add-text': true || productForm.get('description').valid,
                     'bad-text':
                       !productForm.get('description').valid &&
                       (productForm.get('description').touched || productForm.get('description').dirty) 
                   }">Descirption :</div>
                  <p>
                    <textarea
                      matInput
                      formControlName="description"
                      placeholder="Add Description"
                      required
                    >
                  </textarea>

                  <mat-error
                  *ngIf="
                    productForm.get('description').hasError('required') &&
                    (productForm.get('description').touched || productForm.get('description').dirty) 
                  "
                >
                  Description filed is <strong>required</strong>
                </mat-error>
                  </p>
                </div>
                <div class="bullets-points add-text">
                  <div class="font-medium">Featured points :</div>
                  <p>
                    <input
                      matInput
                      formControlName="features"
                      type="text"
                      placeholder="separate each feature with a comma( , )"
                      autocomplete="off"
                    />
                  </p>
                </div>
                <div class="mb-3 select-group">
                  <ng-container>
                    <div class="add-check mb-3">
                      <div class="font-medium"  
                      [ngClass]="{
                        'add-text': true || productForm.get('categoryName').valid,
                        'bad-text':
                          !productForm.get('categoryName').valid &&
                          (productForm.get('categoryName').touched || productForm.get('categoryName').dirty) 
                      }">Category :</div>
                      <input
                        type="text"
                        matInput
                        formControlName="categoryName"
                        [matAutocomplete]="auto"
                        placeholder="Add Category"
                        required
                      />
                      <mat-autocomplete #auto="matAutocomplete">
                        <mat-option
                          *ngFor="let category of categories"
                          [value]="category.categoryName"
                        >
                          {{ category.categoryName }}
                        </mat-option>
                      </mat-autocomplete>

                      <mat-error
                      *ngIf="
                        productForm.get('categoryName').hasError('required') &&
                        (productForm.get('categoryName').touched || productForm.get('categoryName').dirty) 
                      "
                    >
                      Category filed is <strong>required</strong>
                    </mat-error>
                    </div>  
                  </ng-container>

                  <ng-container>
                    <div class="add-check mb-3">
                      <div class="font-medium"  
                      [ngClass]="{
                        'add-text': true || productForm.get('colorName').valid,
                        'bad-text':
                          !productForm.get('colorName').valid &&
                          (productForm.get('colorName').touched || productForm.get('colorName').dirty) 
                      }">Color :</div>
                      <input
                        type="text"
                        matInput
                        formControlName="colorName"
                        [matAutocomplete]="auto"
                        placeholder="Add Color"
                        required
                      />
                      <mat-autocomplete #auto="matAutocomplete">
                        <mat-option
                          *ngFor="let color of filteredColors | async"
                          [value]="color.colorName"
                        >
                          {{ color.colorName }}
                        </mat-option>
                      </mat-autocomplete>

                      <mat-error
                      *ngIf="
                        productForm.get('colorName').hasError('required') &&
                        (productForm.get('colorName').touched || productForm.get('colorName').dirty) 
                      "
                    >
                      Color filed is <strong>required</strong>
                    </mat-error>
                    </div>
                    <!-- <div class="add-text add-check mb-3">
                                 <div class="font-medium mb-2">Size Varients :</div>
                                 <ng-container *ngFor = "let size of sizeArray">
                                    <mat-checkbox class="mr-3">{{size}}</mat-checkbox>
                                 </ng-container>
                              </div> -->
                  </ng-container>

                  <mat-form-field class="edit-check mb-3" 
                   [ngClass]="{
                     'add-text': true || productForm.get('quantity').valid,
                     'bad-text':
                       !productForm.get('quantity').valid &&
                       (productForm.get('quantity').touched || productForm.get('quantity').dirty)
                   }">
                    <div class="font-medium mb-2" >Quantity :</div>
                    <ng-container>
                      <input
                        type="number"
                        matInput
                        autocomplete="off"
                        formControlName="quantity"
                      />
                    </ng-container>
                  </mat-form-field>
                  <mat-error
                  *ngIf="
                    productForm.get('quantity').hasError('required') &&
                    (productForm.get('quantity').touched || productForm.get('quantity').dirty) 
                  "
                >
                Quantity filed is <strong>required</strong>
                </mat-error>
                </div>
                <div class="mb-5 detail-btns">
                  <button
                    mat-raised-button
                    color="accent"
                    class="button-lg mr-3"
                    type="submit"
                    [disabled]= "!productForm.valid"
                  >
                    Create
                  </button>
                  <button class="button-lg" type="button" mat-raised-button (click)="discard()">Discard</button>
                </div>
                <!-- <div fxLayoutAlign="start center">
                           <div class="mr-3"> <span>Share Now</span></div>
                           <div class="detail-product-share">
                              <embryo-SocialShare></embryo-SocialShare>
                           </div>
                        </div> -->
              </div>
              <!-- product-detail-content -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- product-detail-page -->
</form>
